(this.webpackJsonpbj_task=this.webpackJsonpbj_task||[]).push([[0],{12:function(e,t,a){e.exports=a.p+"static/media/nav_before.67166eb1.png"},26:function(e,t,a){e.exports=a.p+"static/media/edit_icon.936f8885.png"},27:function(e,t,a){e.exports=a.p+"static/media/save_icon.bf13633a.png"},28:function(e,t,a){e.exports=a.p+"static/media/nav_next.1fa82738.png"},33:function(e,t,a){e.exports=a(75)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),i=a.n(s),o=(a(38),a(39),a(40),function(e){var t=e.title;return r.a.createElement("h1",{className:"tasks__title"},t)});o.defaultProp={title:"List Task"};var c=o,l=a(8),u=a(22),d=a(23),m=a(32),p=a(30),k=a(5),h=a(3),g=a.n(h),_=a(6),f=a(25),E=a.n(f).a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2/"}),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return E.get("?developer=Test&page=".concat(e)).then((function(e){return e.data}))},T=function(e){return E.post("create?developer=Test",e).then((function(e){return e.data}))},C=function(e,t){return E.post("edit/".concat(e,"?developer=Test"),t).then((function(e){return e.data}))},N=function(e){return E.post("login?developer=Test",e).then((function(e){return e.data}))},b=function(e){return{type:"GET_TASKS",payload:e}},I=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},x=function(e,t,a){return{type:"SET_USER_DATA",login:e,token:t,isAuth:a}},w=function(e){return{type:"ERROR_LOGIN",payload:e}},A=function(e){return{type:"ERROR_DATA",payload:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(_.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(e)),t.next=3,v(e);case 3:"ok"===(n=t.sent).status?a(b(n.message)):console.error(n.message);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=(a(65),function(e){var t=e.onClickFormLoginBtn,a=e.loginInput,n=e.pasInput,s=e.handlerInputChange,i=e.errorData;return r.a.createElement("form",{className:"tasks__loginForm",onSubmit:t},i&&r.a.createElement("div",{className:"textError"},i),r.a.createElement("div",{className:"tasks__loginForm__content"},r.a.createElement("input",{className:i?"tasks__loginForm__input tasks__loginForm__login error":"tasks__loginForm__input tasks__loginForm__login",name:"loginInput",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:s,value:a}),r.a.createElement("input",{className:i?"tasks__loginForm__input tasks__loginForm__password error":"tasks__loginForm__input tasks__loginForm__password",name:"pasInput",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:s,value:n}),r.a.createElement("button",{className:"primaryBtn",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")))}),F=function(e){var t=e.isAuth,a=e.login,n=e.onClickFormLoginBtn,s=e.onClickLoginBtn,i=e.loginInput,o=e.pasInput,c=e.handlerInputChange,l=e.errorLogin;return r.a.createElement("div",{className:"tasks__authorization"},!t&&r.a.createElement("button",{className:"tasks__authorization__autoLogin primaryBtn",title:'\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f "\u041b\u043e\u0433\u0438\u043d" \u0438 "\u041f\u0430\u0440\u043e\u043b\u044c", \u0435\u0441\u043b\u0438 \u0437\u0430\u0431\u044b\u043b\u0438(\u043d\u0435 \u0437\u043d\u0430\u043b\u0438)',onClick:s},"\u0410\u0432\u0442\u043e \u0432\u0445\u043e\u0434"),t?r.a.createElement("span",null,"\u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e ",a):r.a.createElement(y,{onClickFormLoginBtn:n,loginInput:i,pasInput:o,handlerInputChange:c,errorData:l}))},L=(a(66),function(e){var t=e.state,a=e.errorData,n=e.addTask,s=e.handlerInputChange;return r.a.createElement("form",{className:"tr",onSubmit:n},r.a.createElement("div",{className:"td"},r.a.createElement("input",{className:a.username?"tasks__list__input tasks__list__username error ":"tasks__list__input tasks__list__username",name:"usernameInp",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onChange:s,value:t.usernameInp}),a.username&&r.a.createElement("label",{className:"textError"},a.username)),r.a.createElement("div",{className:"td"},r.a.createElement("input",{className:a.email?"tasks__list__input tasks__list__email error ":"tasks__list__input tasks__list__email",name:"emailInp",placeholder:"\u041f\u043e\u0447\u0442\u0430",onChange:s,value:t.emailInp}),a.email&&r.a.createElement("label",{className:"textError"},a.email)),r.a.createElement("div",{className:"td"},r.a.createElement("input",{className:a.text?"tasks__list__input tasks__list__textTask error":"tasks__list__input tasks__list__textTask",name:"textTaskInp",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0438",onChange:s,value:t.textTaskInp}),a.text&&r.a.createElement("label",{className:"textError"},a.text)),r.a.createElement("div",{className:"td"}),r.a.createElement("div",{className:"td"},r.a.createElement("button",{className:"primaryBtn",type:"submit",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))}),O=a(26),P=a.n(O),S=a(27),j=a.n(S),M=(a(67),function(e){var t=e.id,a=e.username,n=e.text,s=e.email,i=e.status,o=e.isAuth,c=e.saveEditTask,l=e.state,u=e.handlerInputChange,d=e.handlerEditMode;return r.a.createElement("div",{className:i?"completed text tr":"text tr"},r.a.createElement("div",{className:"td"},a),r.a.createElement("div",{className:"td"},s),l.isEditMode&&t===l.idEditTask?r.a.createElement("div",{className:"td"},r.a.createElement("input",{className:"tasks__list__input tasks__list__textTask",name:"textTaskInp",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0438",onChange:u,value:l.textTaskInp})):r.a.createElement("div",{className:"td"},n),l.isEditMode&&t===l.idEditTask?r.a.createElement("div",{className:"td"},r.a.createElement("input",{type:"checkbox",name:"status",title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e?",onChange:u,checked:l.status})):r.a.createElement("div",{className:"td"},r.a.createElement("input",{type:"checkbox",name:"status",title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e?",onChange:u,checked:i,disabled:!0})),o?l.isEditMode&&t===l.idEditTask?r.a.createElement("div",{className:"td"},r.a.createElement("img",{className:"save-icon",src:j.a,onClick:function(){return c(t)}})):r.a.createElement("div",{className:"td"},r.a.createElement("img",{className:"edit-icon",src:P.a,onClick:function(){return d(t,a,s,n,i)}})):r.a.createElement("span",null))});M.defaultProps={id:"",username:"",email:"",text:"",status:!1,isAuth:!1,saveEditTask:function(){},handlerInputChange:function(){},handlerEditMode:function(){}};var D=M,B=function(e){var t=e.tasks,a=e.addTask,n=e.errorData,s=e.saveEditTask,i=e.isAuth,o=e.state,c=e.changeAddTaskMode,l=e.handlerInputChange,u=e.handlerEditMode;return r.a.createElement("div",{className:"tasks__list table"},r.a.createElement("div",{className:"tr"},r.a.createElement("div",{className:"th"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),r.a.createElement("div",{className:"th"},"Email"),r.a.createElement("div",{className:"th"},"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438"),r.a.createElement("div",{className:"th"},"\u0412\u044b\u043f\u043e\u043b\u0435\u043d\u0435\u043d\u043e"),i&&r.a.createElement("div",{className:"th"},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f")),t.map((function(e){var t=e.id,a=e.username,n=e.text,c=e.email,d=e.status;return r.a.createElement(D,{id:t,username:a,text:n,email:c,status:d,isAuth:i,saveEditTask:s,state:o,handlerInputChange:l,handlerEditMode:u})})),o.isAddNewTask?r.a.createElement(L,{state:o,errorData:n,addTask:a,handlerInputChange:l}):r.a.createElement("div",null,r.a.createElement("button",{className:"tasks__list__newTask primaryBtn",onClick:function(){return c()},title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"),r.a.createElement("span",{className:"tasks__list__infoLabel"})))};B.defaultProps={tasks:[],addTask:function(){},addNewTaskInput:function(){},saveEditTask:function(){},handlerInputChange:function(){},handlerEditMode:function(){},isAddNewTask:!1,isAuth:!1};var z=B,G=(a(68),[{id:"all",text:"\u0412\u0441\u0435"},{id:"active",text:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"},{id:"completed",text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b\u0435"}]),U=function(e){var t=e.totalTaskCount,a=e.activeFilter,n=e.changeFilter;return r.a.createElement("div",{className:"footer"},r.a.createElement("span",{className:"footer__amount__task"},"\u0412\u0441\u0435\u0433\u043e: ".concat(t," ")),r.a.createElement("div",{className:"footer__filter"},G.map((function(e){var t=e.id,s=e.text;return r.a.createElement("button",{onClick:function(){n(t)},key:t,className:t===a?"footer__filter__btn active":"footer__filter__btn"},s)}))))};U.defaultProp={totalTaskCount:0,activeFilter:function(){},changeFilter:function(){}};var J=U,H=a(31),K=a(28),W=a.n(K),$=a(12),q=a.n($),Q=(a(69),function(e){var t=e.pages,a=e.stepNumber,n=e.setStepNumber,s=e.stepCount,i=e.leftStepPageNumber,o=e.rightStepPageNumber,c=e.currentPage,l=e.onPageChange;return r.a.createElement("div",{className:"tasks__pagination"},r.a.createElement("div",{className:"tasks__pagination__content"},a>1&&r.a.createElement("button",{className:"tasks__pagination__btn",src:q.a,onClick:function(){n(a-1)}},r.a.createElement("img",{src:q.a})),t.filter((function(e){return e>=i&&e<=o})).map((function(e){return r.a.createElement("span",{className:c===e?"tasks_pagination_item selectedPage":"tasks_pagination_item",key:e,onClick:function(){l(e)}},e)})),s>a&&r.a.createElement("button",{className:"tasks__pagination__btn",onClick:function(){n(a+1)}},r.a.createElement("img",{src:W.a}))))}),V=Object(k.b)((function(e){return{pageSize:e.taskReducer.pageSize,totalTaskCount:e.taskReducer.totalTaskCount}}))((function(e){for(var t=e.pageSize,a=e.totalTaskCount,s=e.currentPage,i=e.onPageChange,o=e.stepSizes,c=void 0===o?10:o,l=Math.ceil(a/t),u=[],d=1;d<=l;d++)u.push(d);for(var m=Math.ceil(l/c),p=Object(n.useState)(1),k=Object(H.a)(p,2),h=k[0],g=k[1],_=(h-1)*c+1,f=h*c,E=1;E<=l;E++)({i:E});return r.a.createElement(Q,{pages:u,stepCount:m,stepNumber:h,setStepNumber:g,leftStepPageNumber:_,rightStepPageNumber:f,currentPage:s,onPageChange:i})})),X=(a(70),function(e){var t=e.props,a=e.state,n=e.onClickFormLoginBtn,s=e.onClickLoginBtn,i=e.addTask,o=e.saveEditTask,c=e.filterTasks,l=e.handlerInputChange,u=e.changeAddTaskMode,d=e.handlerEditMode,m=e.onPageChange,p=t.tasks,k=t.filterReducer,h=t.isAuth,g=p&&p.length>0,_=c(p,k);return r.a.createElement("div",{className:"tasks__content"},r.a.createElement(F,{isAuth:h,login:t.login,onClickFormLoginBtn:n,onClickLoginBtn:s,loginInput:a.loginInput,pasInput:a.pasInput,handlerInputChange:l,errorLogin:t.errorLogin}),g&&r.a.createElement(z,{tasks:_,addTask:i,saveEditTask:o,isAuth:h,state:a,changeAddTaskMode:u,handlerInputChange:l,handlerEditMode:d,errorData:t.errorData}),r.a.createElement(V,{currentPage:t.currentPage,onPageChange:m}),r.a.createElement(J,{totalTaskCount:t.totalTaskCount,activeFilter:k,changeFilter:t.changeFilter}))}),Y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isEditMode:!1,idEditTask:"",isAddNewTask:!1,usernameInp:"",emailInp:"",textTaskInp:"",status:0,loginInput:"",pasInput:""},e.initializeState=function(){e.setState({isEditMode:!1,idEditTask:"",isAddNewTask:!1,usernameInp:"",emailInp:"",textTaskInp:"",status:0})},e.handlerEditMode=function(t,a,n,r,s){var i=e.state.isEditMode;e.setState({isEditMode:!i,idEditTask:t,usernameInp:a,emailInp:n,textTaskInp:r,status:s})},e.handlerInputChange=function(t){var a=t.target,n=a.type,r=a.value,s=a.name,i=a.checked;e.setState(Object(l.a)({},s,"checkbox"===n?i:r))},e.filterTasks=function(e,t){switch(t){case"completed":return e.filter((function(e){return e.status}));case"active":return e.filter((function(e){return!e.status}));default:return e}},e.changeAddTaskMode=function(){var t=e.state.isAddNewTask;e.setState({isAddNewTask:!t})},e.addTask=function(t){t.preventDefault(),e.props.addNewTaskThunkCreator(e.state.usernameInp,e.state.emailInp,e.state.textTaskInp)},e.saveEditTask=function(t){e.props.saveEditTaskThunkCreator(t,e.state.textTaskInp,e.state.status,e.props.token,e.props.currentPage),e.initializeState()},e.onClickLoginBtn=function(){e.setState({loginInput:"admin",pasInput:"123"})},e.onClickFormLoginBtn=function(t){t.preventDefault(),e.props.loginThunkCreator(e.state.loginInput,e.state.pasInput)},e.onPageChange=function(t){e.props.getTasksThunkCreator(t)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.getTasksThunkCreator(this.props.currentPage)}},{key:"render",value:function(){return r.a.createElement(X,{props:this.props,state:this.state,onClickFormLoginBtn:this.onClickFormLoginBtn,onClickLoginBtn:this.onClickLoginBtn,addTask:this.addTask,saveEditTask:this.saveEditTask,filterTasks:this.filterTasks,handlerInputChange:this.handlerInputChange,handlerEditMode:this.handlerEditMode,changeAddTaskMode:this.changeAddTaskMode,onPageChange:this.onPageChange})}}]),a}(n.Component),Z=Object(k.b)((function(e){return{tasks:e.taskReducer.tasks,isAddNewTask:e.taskReducer.isAddNewTask,currentPage:e.taskReducer.currentPage,errorData:e.taskReducer.errorData,totalTaskCount:e.taskReducer.totalTaskCount,filterReducer:e.filterReducer,isAuth:e.authReducer.isAuth,login:e.authReducer.login,token:e.authReducer.token,errorLogin:e.authReducer.errorLogin}}),{changeFilter:function(e){return{type:"CHANGE_FILTER",activeFilter:e}},getTasksThunkCreator:R,addNewTaskThunkCreator:function(e,t,a){return function(){var n=Object(_.a)(g.a.mark((function n(r){var s,i;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s=new FormData).append("username",e),s.append("email",t),s.append("text",a),n.next=7,T(s);case 7:"ok"===(i=n.sent).status?r(R()):r(A(i.message));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},loginThunkCreator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"admin",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"123";return function(){var a=Object(_.a)(g.a.mark((function a(n){var r,s;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=new FormData).append("username",e),r.append("password",t),a.next=5,N(r);case 5:"ok"===(s=a.sent).status?n(x(e,s.message.token,!0)):n(w(s.message));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},saveEditTaskThunkCreator:function(e,t,a,n,r){return function(){var s=Object(_.a)(g.a.mark((function s(i){var o,c;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=a?10:0,(o=new FormData).append("text",t),o.append("status",a),o.append("token",n),s.next=8,C(e,o);case 8:"ok"===(c=s.sent).status?i(R(r)):i(A(c.message));case 10:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})(Y),ee=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"tasks"},r.a.createElement(c,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447"}),r.a.createElement(Z,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(4),ae=a(2),ne={tasks:[{id:1,username:"Max",text:"Learn ReactJS",email:"da12@mail.ru",status:0},{id:2,username:"Anton",text:"Learn Redux",email:"da44@mail.ru",status:0},{id:3,username:"Marina",text:"Learn React Router",email:"dasd@mail.ru",status:0}],errorData:{username:null,email:null,text:null,token:null},currentPage:1,pageSize:3,totalTaskCount:0},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PAGE":return Object(ae.a)(Object(ae.a)({},e),{},{currentPage:t.currentPage});case"GET_TASKS":return Object(ae.a)(Object(ae.a)({},e),{},{tasks:t.payload.tasks,totalTaskCount:t.payload.total_task_count});case"ERROR_DATA":return Object(ae.a)(Object(ae.a)({},e),{},{errorData:t.payload});default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.activeFilter;switch(a){case"CHANGE_FILTER":return n;default:return e}},ie={login:null,token:null,isAuth:!1,errorLogin:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(ae.a)(Object(ae.a)({},e),t);case"ERROR_LOGIN":return Object(ae.a)(Object(ae.a)({},e),{},{errorLogin:t.payload.password});default:return e}},ce=Object(te.c)({taskReducer:re,filterReducer:se,authReducer:oe}),le=a(29),ue=(a(71),te.d,Object(te.e)(ce,Object(te.a)(le.a)));window.store=ue;var de=ue;i.a.render(r.a.createElement(k.a,{store:de},r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.5ff30552.chunk.js.map